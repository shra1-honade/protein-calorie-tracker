{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 400,
      "y": 50,
      "width": 600,
      "height": 35,
      "fontSize": 28,
      "fontFamily": 1,
      "text": "Backend Architecture - FastAPI + PostgreSQL",
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 25
    },
    {
      "id": "main-py",
      "type": "rectangle",
      "x": 550,
      "y": 150,
      "width": 200,
      "height": 100,
      "backgroundColor": "#fff9db",
      "strokeColor": "#f59f00",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "main-py-text",
      "type": "text",
      "x": 580,
      "y": 175,
      "width": 140,
      "height": 50,
      "fontSize": 16,
      "fontFamily": 1,
      "text": "main.py\nFastAPI App\nLifespan Manager",
      "textAlign": "center",
      "baseline": 16,
      "fontWeight": "bold"
    },
    {
      "id": "router-auth",
      "type": "rectangle",
      "x": 100,
      "y": 350,
      "width": 180,
      "height": 120,
      "backgroundColor": "#d0bfff",
      "strokeColor": "#6741d9",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "router-auth-text",
      "type": "text",
      "x": 120,
      "y": 375,
      "width": 140,
      "height": 70,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "auth_router\n/auth/*\nGoogle OAuth\nJWT issue\nUser profile/goals",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "router-food",
      "type": "rectangle",
      "x": 320,
      "y": 350,
      "width": 180,
      "height": 120,
      "backgroundColor": "#b2f2bb",
      "strokeColor": "#2f9e44",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "router-food-text",
      "type": "text",
      "x": 340,
      "y": 375,
      "width": 140,
      "height": 70,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "food_router\n/food/*\nCommon foods\nCamera detect\nLog/Get/Delete",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "router-dashboard",
      "type": "rectangle",
      "x": 540,
      "y": 350,
      "width": 180,
      "height": 120,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "router-dashboard-text",
      "type": "text",
      "x": 560,
      "y": 375,
      "width": 140,
      "height": 70,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "dashboard_router\n/dashboard/*\nDaily summary\nWeekly trends",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "router-group",
      "type": "rectangle",
      "x": 760,
      "y": 350,
      "width": 180,
      "height": 120,
      "backgroundColor": "#ffc9c9",
      "strokeColor": "#c92a2a",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "router-group-text",
      "type": "text",
      "x": 780,
      "y": 375,
      "width": 140,
      "height": 70,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "group_router\n/groups/*\nCreate/Join\nLeaderboard\nCompete",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "dependencies",
      "type": "rectangle",
      "x": 1000,
      "y": 350,
      "width": 200,
      "height": 120,
      "backgroundColor": "#ffec99",
      "strokeColor": "#f08c00",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "dependencies-text",
      "type": "text",
      "x": 1020,
      "y": 370,
      "width": 160,
      "height": 80,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "dependencies.py\nget_db()\nget_current_user()\nJWT validation\nDB pool.acquire()",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "database-py",
      "type": "rectangle",
      "x": 550,
      "y": 600,
      "width": 200,
      "height": 150,
      "backgroundColor": "#ffe3e3",
      "strokeColor": "#e03131",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "database-py-text",
      "type": "text",
      "x": 570,
      "y": 625,
      "width": 160,
      "height": 100,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "database.py\ncreate_pool()\nclose_pool()\ninit_db()\nSchema migration\nVersion tracking",
      "textAlign": "center",
      "baseline": 14,
      "fontWeight": "bold"
    },
    {
      "id": "config-py",
      "type": "rectangle",
      "x": 100,
      "y": 600,
      "width": 180,
      "height": 100,
      "backgroundColor": "#e7f5ff",
      "strokeColor": "#339af0",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "config-py-text",
      "type": "text",
      "x": 120,
      "y": 625,
      "width": 140,
      "height": 50,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "config.py\nPydantic Settings\n.env loader\nLRU cached",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "auth-py",
      "type": "rectangle",
      "x": 320,
      "y": 600,
      "width": 180,
      "height": 100,
      "backgroundColor": "#f3f0ff",
      "strokeColor": "#7950f2",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "auth-py-text",
      "type": "text",
      "x": 340,
      "y": 625,
      "width": 140,
      "height": 50,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "auth.py\nJWT encode/decode\nOAuth token swap\nHS256, 7d expiry",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "gemini-py",
      "type": "rectangle",
      "x": 800,
      "y": 600,
      "width": 180,
      "height": 100,
      "backgroundColor": "#fff5f5",
      "strokeColor": "#f03e3e",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "gemini-py-text",
      "type": "text",
      "x": 820,
      "y": 625,
      "width": 140,
      "height": 50,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "gemini_client.py\nVision API\nFood detection\nIn-memory image",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "seed-py",
      "type": "rectangle",
      "x": 1020,
      "y": 600,
      "width": 180,
      "height": 100,
      "backgroundColor": "#d3f9d8",
      "strokeColor": "#37b24d",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "seed-py-text",
      "type": "text",
      "x": 1040,
      "y": 625,
      "width": 140,
      "height": 50,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "seed.py\n15 common foods\nDB-driven\nAuto on startup",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "arrow-main-routers",
      "type": "arrow",
      "x": 650,
      "y": 250,
      "width": 0,
      "height": 90,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-main-routers-label",
      "type": "text",
      "x": 660,
      "y": 285,
      "width": 80,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "app.include_\nrouter()",
      "textAlign": "left"
    },
    {
      "id": "arrow-routers-deps",
      "type": "arrow",
      "x": 940,
      "y": 410,
      "width": 50,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#fa5252",
      "strokeWidth": 2,
      "strokeStyle": "dashed"
    },
    {
      "id": "arrow-routers-deps-label",
      "type": "text",
      "x": 945,
      "y": 385,
      "width": 40,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "Depends()",
      "textAlign": "center"
    },
    {
      "id": "arrow-main-db",
      "type": "arrow",
      "x": 650,
      "y": 250,
      "width": 0,
      "height": 340,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#e03131",
      "strokeWidth": 3
    },
    {
      "id": "arrow-main-db-label",
      "type": "text",
      "x": 660,
      "y": 410,
      "width": 100,
      "height": 40,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "lifespan:\ncreate_pool()\ninit_db()\nseed()",
      "textAlign": "left"
    },
    {
      "id": "postgres-db",
      "type": "rectangle",
      "x": 550,
      "y": 850,
      "width": 200,
      "height": 120,
      "backgroundColor": "#f8f9fa",
      "strokeColor": "#212529",
      "strokeWidth": 3,
      "fillStyle": "solid",
      "roughness": 0
    },
    {
      "id": "postgres-db-text",
      "type": "text",
      "x": 570,
      "y": 875,
      "width": 160,
      "height": 70,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "PostgreSQL (Neon)\nTables:\nusers, food_entries,\ncommon_foods,\ngroups, group_members",
      "textAlign": "center",
      "baseline": 14
    },
    {
      "id": "arrow-db-postgres",
      "type": "arrow",
      "x": 650,
      "y": 750,
      "width": 0,
      "height": 90,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#212529",
      "strokeWidth": 3
    },
    {
      "id": "arrow-db-postgres-label",
      "type": "text",
      "x": 660,
      "y": 785,
      "width": 100,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "asyncpg pool\nconnection",
      "textAlign": "left"
    },
    {
      "id": "flow-box",
      "type": "rectangle",
      "x": 100,
      "y": 1050,
      "width": 1100,
      "height": 120,
      "backgroundColor": "#fff4e6",
      "strokeColor": "#fd7e14",
      "strokeWidth": 2,
      "fillStyle": "solid",
      "roughness": 0
    },
    {
      "id": "flow-text",
      "type": "text",
      "x": 130,
      "y": 1070,
      "width": 1040,
      "height": 80,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "ðŸ”„ Request Flow:\nClient â†’ Router â†’ Depends(get_current_user) [JWT validate] â†’\nDepends(get_db) [pool.acquire()] â†’ Business Logic â†’ DB Query ($1, $2... params) â†’\nPydantic Response Model â†’ JSON",
      "textAlign": "left",
      "baseline": 14
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff"
  }
}

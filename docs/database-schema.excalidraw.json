{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 400,
      "y": 50,
      "width": 500,
      "height": 35,
      "fontSize": 28,
      "fontFamily": 1,
      "text": "Database Schema - PostgreSQL",
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 25
    },
    {
      "id": "users-table",
      "type": "rectangle",
      "x": 150,
      "y": 150,
      "width": 300,
      "height": 280,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "users-title",
      "type": "text",
      "x": 220,
      "y": 165,
      "width": 160,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "users",
      "textAlign": "center",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "users-fields",
      "type": "text",
      "x": 170,
      "y": 200,
      "width": 260,
      "height": 210,
      "fontSize": 14,
      "fontFamily": 3,
      "text": "id SERIAL PRIMARY KEY\ngoogle_id VARCHAR UNIQUE\nemail VARCHAR NOT NULL\ndisplay_name VARCHAR\navatar_url VARCHAR\nprotein_goal FLOAT (150.0)\ncalorie_goal FLOAT (2000.0)\ncreated_at TIMESTAMPTZ\n\nINDEX: google_id",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "food-entries-table",
      "type": "rectangle",
      "x": 550,
      "y": 150,
      "width": 350,
      "height": 320,
      "backgroundColor": "#b2f2bb",
      "strokeColor": "#2f9e44",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "food-entries-title",
      "type": "text",
      "x": 640,
      "y": 165,
      "width": 170,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "food_entries",
      "textAlign": "center",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "food-entries-fields",
      "type": "text",
      "x": 570,
      "y": 200,
      "width": 310,
      "height": 250,
      "fontSize": 14,
      "fontFamily": 3,
      "text": "id SERIAL PRIMARY KEY\nuser_id INT ‚Üí users(id)\nfood_name VARCHAR NOT NULL\nprotein_g FLOAT NOT NULL\ncalories FLOAT NOT NULL\nfdc_id VARCHAR\nmeal_type VARCHAR (snack)\nserving_qty FLOAT (1.0)\nlogged_at TIMESTAMPTZ NOT NULL\n\nINDEX: user_id, logged_at",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "common-foods-table",
      "type": "rectangle",
      "x": 150,
      "y": 530,
      "width": 300,
      "height": 280,
      "backgroundColor": "#ffec99",
      "strokeColor": "#f08c00",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "common-foods-title",
      "type": "text",
      "x": 220,
      "y": 545,
      "width": 160,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "common_foods",
      "textAlign": "center",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "common-foods-fields",
      "type": "text",
      "x": 170,
      "y": 580,
      "width": 260,
      "height": 210,
      "fontSize": 14,
      "fontFamily": 3,
      "text": "id SERIAL PRIMARY KEY\nname VARCHAR NOT NULL\nprotein_g FLOAT NOT NULL\ncalories FLOAT NOT NULL\ncategory VARCHAR NOT NULL\nicon VARCHAR NOT NULL\nsort_order INT NOT NULL\n\n15 seed entries from seed.py",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "groups-table",
      "type": "rectangle",
      "x": 550,
      "y": 530,
      "width": 350,
      "height": 280,
      "backgroundColor": "#ffc9c9",
      "strokeColor": "#c92a2a",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "groups-title",
      "type": "text",
      "x": 660,
      "y": 545,
      "width": 130,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "groups",
      "textAlign": "center",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "groups-fields",
      "type": "text",
      "x": 570,
      "y": 580,
      "width": 310,
      "height": 210,
      "fontSize": 14,
      "fontFamily": 3,
      "text": "id SERIAL PRIMARY KEY\nname VARCHAR NOT NULL\ninvite_code VARCHAR UNIQUE\ncreated_by INT ‚Üí users(id)\ncreated_at TIMESTAMPTZ\n\nINDEX: invite_code\n\n6-char random code gen",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "group-members-table",
      "type": "rectangle",
      "x": 1000,
      "y": 150,
      "width": 350,
      "height": 280,
      "backgroundColor": "#d0bfff",
      "strokeColor": "#6741d9",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "group-members-title",
      "type": "text",
      "x": 1080,
      "y": 165,
      "width": 190,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "group_members",
      "textAlign": "center",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "group-members-fields",
      "type": "text",
      "x": 1020,
      "y": 200,
      "width": 310,
      "height": 210,
      "fontSize": 14,
      "fontFamily": 3,
      "text": "id SERIAL PRIMARY KEY\ngroup_id INT ‚Üí groups(id)\nuser_id INT ‚Üí users(id)\njoined_at TIMESTAMPTZ\n\nUNIQUE: (group_id, user_id)\nINDEX: group_id, user_id\n\nJunction table for M:N",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "schema-version-table",
      "type": "rectangle",
      "x": 1000,
      "y": 530,
      "width": 350,
      "height": 180,
      "backgroundColor": "#e9ecef",
      "strokeColor": "#495057",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "schema-version-title",
      "type": "text",
      "x": 1080,
      "y": 545,
      "width": 190,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "schema_version",
      "textAlign": "center",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "schema-version-fields",
      "type": "text",
      "x": 1020,
      "y": 580,
      "width": 310,
      "height": 110,
      "fontSize": 14,
      "fontFamily": 3,
      "text": "id SERIAL PRIMARY KEY\nversion INT NOT NULL\napplied_at TIMESTAMPTZ\n\nTracks DB migrations\nCurrent: version 1",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "arrow-users-food",
      "type": "arrow",
      "x": 450,
      "y": 250,
      "width": 90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#1971c2",
      "strokeWidth": 3
    },
    {
      "id": "arrow-users-food-label",
      "type": "text",
      "x": 460,
      "y": 225,
      "width": 70,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "user_id FK",
      "textAlign": "center"
    },
    {
      "id": "arrow-users-groups",
      "type": "arrow",
      "x": 450,
      "y": 350,
      "width": 300,
      "height": 250,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#c92a2a",
      "strokeWidth": 3
    },
    {
      "id": "arrow-users-groups-label",
      "type": "text",
      "x": 500,
      "y": 450,
      "width": 90,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "created_by FK",
      "textAlign": "center"
    },
    {
      "id": "arrow-groups-members",
      "type": "arrow",
      "x": 900,
      "y": 600,
      "width": 290,
      "height": -280,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#6741d9",
      "strokeWidth": 3
    },
    {
      "id": "arrow-groups-members-label",
      "type": "text",
      "x": 950,
      "y": 450,
      "width": 90,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "group_id FK",
      "textAlign": "center"
    },
    {
      "id": "arrow-users-members",
      "type": "arrow",
      "x": 450,
      "y": 200,
      "width": 540,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#6741d9",
      "strokeWidth": 3
    },
    {
      "id": "arrow-users-members-label",
      "type": "text",
      "x": 650,
      "y": 175,
      "width": 80,
      "height": 20,
      "fontSize": 12,
      "fontFamily": 1,
      "text": "user_id FK",
      "textAlign": "center"
    },
    {
      "id": "notes-box",
      "type": "rectangle",
      "x": 150,
      "y": 900,
      "width": 1200,
      "height": 160,
      "backgroundColor": "#fff4e6",
      "strokeColor": "#fd7e14",
      "strokeWidth": 2,
      "fillStyle": "solid",
      "roughness": 0
    },
    {
      "id": "notes-text",
      "type": "text",
      "x": 180,
      "y": 920,
      "width": 1140,
      "height": 120,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "üìù Key Notes:\n‚Ä¢ All timestamps use TIMESTAMPTZ (timezone-aware)\n‚Ä¢ Foreign keys enforce referential integrity (CASCADE on delete where appropriate)\n‚Ä¢ Indexed columns: google_id, (user_id, logged_at), invite_code, (group_id, user_id)\n‚Ä¢ asyncpg requires date objects for DATE queries, not ISO strings\n‚Ä¢ WAL mode enabled for better concurrency\n‚Ä¢ Auto-initialization via database.py on FastAPI lifespan startup",
      "textAlign": "left",
      "baseline": 14
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff"
  }
}

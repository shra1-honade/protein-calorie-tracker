{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 400,
      "y": 50,
      "width": 500,
      "height": 35,
      "fontSize": 28,
      "fontFamily": 1,
      "text": "Authentication Flow - OAuth + JWT",
      "textAlign": "center",
      "verticalAlign": "top",
      "baseline": 25
    },
    {
      "id": "step1-box",
      "type": "rectangle",
      "x": 150,
      "y": 150,
      "width": 250,
      "height": 100,
      "backgroundColor": "#d0bfff",
      "strokeColor": "#6741d9",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step1-text",
      "type": "text",
      "x": 170,
      "y": 170,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "1Ô∏è‚É£ User clicks\n\"Continue with Google\"\non LoginPage",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step2-box",
      "type": "rectangle",
      "x": 500,
      "y": 150,
      "width": 250,
      "height": 100,
      "backgroundColor": "#b2f2bb",
      "strokeColor": "#2f9e44",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step2-text",
      "type": "text",
      "x": 520,
      "y": 170,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "2Ô∏è‚É£ GET /auth/google/login\nBackend generates OAuth URL\nwith GOOGLE_CLIENT_ID",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step3-box",
      "type": "rectangle",
      "x": 850,
      "y": 150,
      "width": 250,
      "height": 100,
      "backgroundColor": "#ffec99",
      "strokeColor": "#f08c00",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step3-text",
      "type": "text",
      "x": 870,
      "y": 170,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "3Ô∏è‚É£ Redirect to Google\nUser signs in with Google\nGoogle account picker",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step4-box",
      "type": "rectangle",
      "x": 850,
      "y": 320,
      "width": 250,
      "height": 100,
      "backgroundColor": "#ffc9c9",
      "strokeColor": "#c92a2a",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step4-text",
      "type": "text",
      "x": 870,
      "y": 340,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "4Ô∏è‚É£ Google redirects back\nto /auth/google/callback\nwith auth code",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step5-box",
      "type": "rectangle",
      "x": 500,
      "y": 320,
      "width": 250,
      "height": 120,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step5-text",
      "type": "text",
      "x": 520,
      "y": 340,
      "width": 210,
      "height": 80,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "5Ô∏è‚É£ Backend exchanges code\nfor tokens (auth.py)\nFetches user profile\nUpsert to users table",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step6-box",
      "type": "rectangle",
      "x": 500,
      "y": 500,
      "width": 250,
      "height": 100,
      "backgroundColor": "#fff9db",
      "strokeColor": "#f59f00",
      "strokeWidth": 3,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step6-text",
      "type": "text",
      "x": 520,
      "y": 520,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "6Ô∏è‚É£ Generate JWT\nHS256, 7-day expiry\nPayload: {user_id, exp}",
      "textAlign": "left",
      "baseline": 14,
      "fontWeight": "bold"
    },
    {
      "id": "step7-box",
      "type": "rectangle",
      "x": 150,
      "y": 500,
      "width": 250,
      "height": 100,
      "backgroundColor": "#e7f5ff",
      "strokeColor": "#339af0",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step7-text",
      "type": "text",
      "x": 170,
      "y": 520,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "7Ô∏è‚É£ Redirect to\n/auth/callback?token=JWT\nFrontend extracts token",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step8-box",
      "type": "rectangle",
      "x": 150,
      "y": 670,
      "width": 250,
      "height": 100,
      "backgroundColor": "#d3f9d8",
      "strokeColor": "#37b24d",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step8-text",
      "type": "text",
      "x": 170,
      "y": 690,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "8Ô∏è‚É£ login(token) in\nAuthContext\nStore in localStorage",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step9-box",
      "type": "rectangle",
      "x": 500,
      "y": 670,
      "width": 250,
      "height": 100,
      "backgroundColor": "#fff5f5",
      "strokeColor": "#f03e3e",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step9-text",
      "type": "text",
      "x": 520,
      "y": 690,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "9Ô∏è‚É£ Fetch user profile\nGET /auth/me\nwith Bearer token",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "step10-box",
      "type": "rectangle",
      "x": 850,
      "y": 670,
      "width": 250,
      "height": 100,
      "backgroundColor": "#f3f0ff",
      "strokeColor": "#7950f2",
      "strokeWidth": 2,
      "fillStyle": "hachure",
      "roughness": 1
    },
    {
      "id": "step10-text",
      "type": "text",
      "x": 870,
      "y": 690,
      "width": 210,
      "height": 60,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "üîü Redirect to /\nDashboardPage loads\nUser is authenticated",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "arrow-1-2",
      "type": "arrow",
      "x": 400,
      "y": 200,
      "width": 90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-2-3",
      "type": "arrow",
      "x": 750,
      "y": 200,
      "width": 90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-3-4",
      "type": "arrow",
      "x": 975,
      "y": 250,
      "width": 0,
      "height": 60,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-4-5",
      "type": "arrow",
      "x": 850,
      "y": 370,
      "width": -90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-5-6",
      "type": "arrow",
      "x": 625,
      "y": 440,
      "width": 0,
      "height": 50,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-6-7",
      "type": "arrow",
      "x": 500,
      "y": 550,
      "width": -90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-7-8",
      "type": "arrow",
      "x": 275,
      "y": 600,
      "width": 0,
      "height": 60,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-8-9",
      "type": "arrow",
      "x": 400,
      "y": 720,
      "width": 90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "arrow-9-10",
      "type": "arrow",
      "x": 750,
      "y": 720,
      "width": 90,
      "height": 0,
      "startArrowhead": null,
      "endArrowhead": "arrow",
      "strokeColor": "#000000",
      "strokeWidth": 2
    },
    {
      "id": "protected-routes-box",
      "type": "rectangle",
      "x": 150,
      "y": 850,
      "width": 950,
      "height": 140,
      "backgroundColor": "#fff4e6",
      "strokeColor": "#fd7e14",
      "strokeWidth": 3,
      "fillStyle": "solid",
      "roughness": 0
    },
    {
      "id": "protected-routes-title",
      "type": "text",
      "x": 180,
      "y": 870,
      "width": 300,
      "height": 25,
      "fontSize": 18,
      "fontFamily": 1,
      "text": "üîí Protected Route Flow:",
      "textAlign": "left",
      "baseline": 18,
      "fontWeight": "bold"
    },
    {
      "id": "protected-routes-text",
      "type": "text",
      "x": 180,
      "y": 905,
      "width": 890,
      "height": 70,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "Every API request ‚Üí Axios interceptor adds Authorization: Bearer <JWT> ‚Üí\nBackend Depends(get_current_user) ‚Üí decode_jwt() validates signature & expiry ‚Üí\nExtract user_id from payload ‚Üí SELECT user from DB ‚Üí Return user dict ‚Üí\nRoute handler receives authenticated user",
      "textAlign": "left",
      "baseline": 14
    },
    {
      "id": "logout-box",
      "type": "rectangle",
      "x": 150,
      "y": 1050,
      "width": 950,
      "height": 80,
      "backgroundColor": "#ffe3e3",
      "strokeColor": "#e03131",
      "strokeWidth": 2,
      "fillStyle": "solid",
      "roughness": 0
    },
    {
      "id": "logout-text",
      "type": "text",
      "x": 180,
      "y": 1075,
      "width": 890,
      "height": 30,
      "fontSize": 14,
      "fontFamily": 1,
      "text": "üö™ Logout: Click logout button ‚Üí logout() in AuthContext ‚Üí localStorage.removeItem('token') ‚Üí\nsetUser(null) ‚Üí navigate('/login')",
      "textAlign": "left",
      "baseline": 14
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff"
  }
}
